<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Authentication required</title>

    <script type="application/javascript">
      function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
          var pair = vars[i].split('=');
          if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
          }
        }
      }

      window.onload = function() {
        var redirect_uri = getQueryVariable('redirect_uri');

        if (redirect_uri === undefined || redirect_uri === null) {
          document.getElementById('notAuthorizedDiv').style.display = 'block';
        } else {
          document.getElementById('authenticationRequiredDiv').style.display = 'block';

          // Allow redirect only to Github
          if (redirect_uri.indexOf('https://github.com/login/oauth/authorize') === 0) {
            document.getElementById('authenticationButton').addEventListener('click', function() {
              window.location.replace(redirect_uri);
            }, false);
          }
        }
      };
    </script>
</head>
<body>
<div id="notAuthorizedDiv" style="display: none;">
    You are not authorized to see this resource, contact us if you should.
</div>
<div id="authenticationRequiredDiv" style="display: none;">
    You have to authenticate via Github to access this resource:
    <input id="authenticationButton" type="button" value="Go to Github"></input>
</div>
</body>
</html>
